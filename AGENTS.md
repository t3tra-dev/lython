# AGENT 開発用メモ

この `AGENTS.md` はリポジトリ内で作業する AI へのインストラクションをまとめたドキュメントです。以降の指示に従って作業してください。

## プロジェクト概要

LLVM(Clang) ツールチェーン を用いた実験的な Python コンパイラ "Lython" の開発を行います。Lython は以下の特徴を持ちます。

- **目的**: Python 文法互換でありながら _TypeScript レベルの厳格な静的型検査_ と _AOT コンパイルによる C/C++ 並み性能_ を実現する。
- **柱**: ① **TypedAST** による厳密な型解析、② **PyObject 系譜** と **Native 系譜** の両立、③ **MLIR ベース** の多層 IR パイプライン、④ **LLVM Shadow‑Stack GC** を基盤とした軽量ランタイム。
- **アウトプット**: lythonc (CLI), liblython (ライブラリ), 標準ランタイム (~50 KB) など。


## 基本方針

- すべての会話/コメント/ドキュメントは **日本語** で記述すること。ただし、コンソールへの出力やエラーメッセージは英語を使用する。
- 実装に入る前に `docs/` 配下のドキュメント（特に `STRUCT.md`, `GUIDE.md`, `LOADMAP.md`）を参照し、現在の設計方針とロードマップを理解すること。
- プルリクエスト時にはテスト・フォーマットを実行し、エラーの有無を確認すること。現時点では `flake8`, `black`, `isort`, `mypy`, `pytest` が利用可能と想定する。
- コードスタイルは `black` と `isort` を使用し、静的解析は `flake8` と `mypy` を通す。
- 新しい機能追加や大幅な仕様変更は `docs/rfcs/` に提案する (将来的に設置予定)。

## 作業手順

1. コードやドキュメントを編集する前に、関連ドキュメントを読み内容を把握する。
2. 編集後は `isort` -> `black` の順にフォーマットを実行。
3. `flake8`/`mypy`/`pytest` を実行し、可能な範囲で警告やエラーを解消する。
4. テストがすべて成功していることを確認したらコミットを作成する。

## 参考

- プロジェクトのトップレベル構造やレイヤリング指針は `docs/STRUCT.md` を参照。
- 詳細なコンポーネント設計やサンプルコードは `docs/GUIDE.md` を参照。
- 今後のマイルストーンや長期計画は `docs/LOADMAP.md` を参照。
- `lowering_sample/` ディレクトリには簡単なサンプルが置かれている。
